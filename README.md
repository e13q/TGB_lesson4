
# Quiz бот для Telegram и сообщества VK API

В данном проекте реализован Quiz для телеграмм и VK.

В игре можно запросить вопрос, ответить на него, получить оценку ответа, сдаться, посмотреть очки.

Игра длится, пока все вопросы не будут отвечены / пропущены. Список вопросов можно изменить в настройках.


## Как установить

Python3 должен быть установлен. 
Используйте `pip` для установки зависимостей:
```
pip install -r requirements.txt
```

## Подготовка к запуску

### Telegram

[Как получить токен для телеграмм бота.](https://way23.ru/%D1%80%D0%B5%D0%B3%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D0%B1%D0%BE%D1%82%D0%B0-%D0%B2-telegram.html).

Для получения логов потребуется ID пользователя Telegram, получить который можно написав на [@userinfobot](https://t.me/userinfobot) пункт "id".

### VK

В разделе настроек сообщества необходимо 

* Перейти в раздел API;
* Создать ключ API;
* Включить Long Pooling с фильтрацией по сообщениям;
* Разрешить сообщения для сообщества в настройках.

### REDIS

Для корректной работы бота потребуется cloud решение Redis.
Необходимые данные можно получить после регистрации и нажатия на Try for free [тут](https://cloud.redis.io)


### Env

После получения всего необходимо создать в корневой папке проекта файл .env и добавить значения: 

```
TELEGRAM_MAIN_BOT_TOKEN = '0000000:AAGGGGGGEWIOGNWEIOGNIWEWE' # Токен бота для диалога с пользователем
TELEGRAM_LOGGER_BOT_TOKEN_TG = '0000000:AAGGGGGGEWIOGNWEIOGNIWEWE' # Токен бота для получения сообщения об ошибках бота Телеграмм
TELEGRAM_LOGGER_BOT_TOKEN_VK = '0000000:AAGGGGGGEWIOGNWEIOGNIWEWE' # Токен бота для получения сообщения об ошибках обработки запросов VK API
TELEGRAM_CHAT_ID = '123456789' # ID сотрудника, получающего сообщения об ошибках
VK_GROUP_TOKEN = 'vk1.a.-***-5Q' # Токен API сообщества VK
REDIS_CLOUD_HOST='redis-111111.c111.eu-8-7.ec3.redns.redis-cloud.com'
REDIS_CLOUD_PORT=246543
REDIS_CLOUD_USERNAME="default"
REDIS_CLOUD_PASSWORD="FOMEfowemfpoMEFOPwerp51235"
```

### Подготовка данных

В качествен примера данных используются [данные, предоставленные командой Devman](https://dvmn.org/media/modules_dist/quiz-questions.zip).

Для парсинга данных можно воспользоваться скриптом parse_qa_txt_to_json.py в данном репозитории. Данные должны быть разархивированы в папку.

```
python3 parse_qa_txt_to_json.py
```

## Запуск

Запустить скрипт для Телеграмм можно, выполнив команду:

```
python3 telegram_bot.py
```

Запустить скрипт для VK можно, выполнив команду:

```
python3 vk_bot.py
```

## Пример работы скрипта

### Telegram

[Ссылка на рабочую версию](https://t.me/UronshaBot)

### VK

[Ссылка на группу](https://vk.com/club228001877)

[Ссылка на диалог](https://vk.com/im?sel=-228001877)

## Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).
